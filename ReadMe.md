# Data Modeling with Postgres



## Overview

This is to load song dataset and log files into PostgreSQL database and create a  star schema to successfully load the data into designated tables. 

### Prerequisites

PostgreSQL

## How to run your code

`python `

```shell
### To create database and tables in PostgreSQL
python3 create_tables.py
### To load file data into tables
Python3 etl.py
```

`sql`

To test if the records are correctly inserted to the designated tables, we run the test.ipynb to double check the records in each table. 

## How I match the project [rubrics](https://review.udacity.com/#!/rubrics/2500/view)

- Datasets:

  1) Song Data

  The song dataset is a subset of real data from  [Million Song Dataset](https://labrosa.ee.columbia.edu/millionsong/). Each file is in JSON format and contains metadata about a song and the artist of that song. 

  file example:

  ```txt
  song_data/A/B/C/TRABCEI128F424C983.json
  song_data/A/A/B/TRAABJL12903CDCF1A.json
  ```

  ```json
  {"num_songs": 1, "artist_id": "ARJIE2Y1187B994AB7", "artist_latitude": null, "artist_longitude": null, "artist_location": "", "artist_name": "Line Renaud", "song_id": "SOUPIRU12A6D4FA1E1", "title": "Der Kleine Dompfaff", "duration": 152.92036, "year": 0}
  ```

  2) Log Data

  The log files are json formats generated by the event simulator based on the songs in the song dataset. 

  file example:

  ```txt
  log_data/2018/11/2018-11-12-events.json
  log_data/2018/11/2018-11-13-events.json
  ```

  ![img](https://s3.amazonaws.com/video.udacity-data.com/topher/2019/February/5c6c15e9_log-data/log-data.png)

  

- Table Creation

  Star Schema:

  ![image-20190413214558937](/Users/chloedeng/Library/Application Support/typora-user-images/image-20190413214558937.png)

  

- ETL Process

  1) sql_queries.py include all create statements to create each table

  2) create_tables.py creates the database and the tables. 

  3) test.ipynb is to check the columns and records are correctly inserted into each table. 

  4) etl.py is to process the entire datasets to the designated tables. 

  

  

